---
date: 2021-08-18
isCJKLanguage: true
title: "壓縮演算法比較：LZMA vs GZip vs LZ4 "
tags: [開發日常]
draft: true
---

最近有定期從遠端主機上拉檔案下來的需求，內容是遊戲的資源檔，每次數百GB。

因為檔案實在太大，我研究了幾個壓縮演算法，希望能減小檔案尺寸，進而縮短下載時間。

我一共比較了五種壓縮方法：

1. `LZMA2` 最快速壓縮
2. `LZMA2` 一般壓縮
3. `Gzip`
4. `LZ4`
5. `Zip`

這次測試的原始檔案總共 129GB。內容物為 45% FBX模型、45% TGA貼圖、10% 其他有的沒的。

測試結果如下：

<style>
table { border:solid 0px #cccccc; }
th, td {border:1px solid #aaa; padding: 5px;}
</style>

方法            | 壓縮時間 | 壓縮後大小 | 壓縮比
----------------|---------|-----------|-----
LAMZ2 最快速壓縮 |  22m55s | 38 GB     |  29.5%
LAMZ2 一般壓縮   |   43m3s | 36.8 GB   |  28.5%
Gzip            |  75m33s | 57.2 GB   |  33.1%
Zip             |  79m28s | 43 GB     |  33.3% 
LZ4             |   8m21s | 42.7 GB   |  44.3%

我下載資源總共需要的時間：

方法            | 壓縮時間 | 壓縮後大小 | 下載時間
----------------|---------|-----------|-----
LAMZ2 最快速壓縮 |  22m55s | 38 GB     |  29.5%
LAMZ2 一般壓縮   |   43m3s | 36.8 GB   |  28.5%
Gzip            |  75m33s | 57.2 GB   |  33.1%
Zip             |  79m28s | 43 GB     |  33.3% 
LZ4             |   8m21s | 42.7 GB   |  44.3%

